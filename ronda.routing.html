<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>ronda.routing documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">ronda/routing 0.2.8-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ronda</span></div></div></li><li class="depth-2 current"><a href="ronda.routing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routing</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.descriptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>descriptor</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.generate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generate</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.href.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>href</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.meta-middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>meta-middleware</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.middleware-data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware-data</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.prefix.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.routed-middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routed-middleware</span></div></a></li><li class="depth-3 branch"><a href="ronda.routing.simple.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simple</span></div></a></li><li class="depth-3"><a href="ronda.routing.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ronda.routing.html#var-active-routed-middleware"><div class="inner"><span>active-routed-middleware</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-assoc-metadata"><div class="inner"><span>assoc-metadata</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-compile-endpoints"><div class="inner"><span>compile-endpoints</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-conditional-middleware"><div class="inner"><span>conditional-middleware</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-conditional-transform"><div class="inner"><span>conditional-transform</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-descriptor"><div class="inner"><span>descriptor</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-disable-middlewares"><div class="inner"><span>disable-middlewares</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-enable-middlewares"><div class="inner"><span>enable-middlewares</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-endpoint"><div class="inner"><span>endpoint</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-endpoint-middleware"><div class="inner"><span>endpoint-middleware</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-endpoint-transform"><div class="inner"><span>endpoint-transform</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-href"><div class="inner"><span>href</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-match"><div class="inner"><span>match</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-merge-metadata"><div class="inner"><span>merge-metadata</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-meta-middleware"><div class="inner"><span>meta-middleware</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-path"><div class="inner"><span>path</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-prefix"><div class="inner"><span>prefix</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-routed-middleware"><div class="inner"><span>routed-middleware</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-routes"><div class="inner"><span>routes</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-routing-data"><div class="inner"><span>routing-data</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-update-metadata"><div class="inner"><span>update-metadata</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-wrap-endpoint"><div class="inner"><span>wrap-endpoint</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-wrap-endpoints"><div class="inner"><span>wrap-endpoints</span></div></a></li><li class="depth-1"><a href="ronda.routing.html#var-wrap-routing"><div class="inner"><span>wrap-routing</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">ronda.routing</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-active-routed-middleware"><h3>active-routed-middleware</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(active-routed-middleware handler middleware-key wrap-fn &amp; args)</code></div><div class="doc"><div class="markdown"><p>Generate a handler that applies the middleware represented by <code>wrap-fn</code> unless it is explicitly disabled for the currently routed endpoint. This has to be used below <code>ronda.routing.middleware/wrap-routing</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/routed_middleware.clj#L33">view source</a></div></div><div class="public anchor" id="var-assoc-metadata"><h3>assoc-metadata</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(assoc-metadata descriptor route-id k v)</code></div><div class="doc"><div class="markdown"><p>Assoc a key/value pair into the given routes metadata.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/descriptor.clj#L68">view source</a></div></div><div class="public anchor" id="var-compile-endpoints"><h3>compile-endpoints</h3><div class="usage"><code>(compile-endpoints handlers)</code></div><div class="doc"><div class="markdown"><p>Create a Ring handler that intercepts all requests that had an endpoint ID determined by <code>wrap-routing</code> and routes them to the matching handler in the given handlers map. If no match is found, <code>nil</code> is returned.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L54">view source</a></div></div><div class="public anchor" id="var-conditional-middleware"><h3>conditional-middleware</h3><div class="usage"><code>(conditional-middleware handler p? wrap-fn)</code></div><div class="doc"><div class="markdown"><p>Apply the given middleware only if the request matches the given predicate.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L63">view source</a></div></div><div class="public anchor" id="var-conditional-transform"><h3>conditional-transform</h3><div class="usage"><code>(conditional-transform handler p? f)</code></div><div class="doc"><div class="markdown"><p>Apply the given transformation function to the request, only if it matches the given predicate.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L73">view source</a></div></div><div class="public anchor" id="var-descriptor"><h3>descriptor</h3><div class="usage"><code>(descriptor request)</code></div><div class="doc"><div class="markdown"><p>Get the descriptor that caused the request to be routed.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L31">view source</a></div></div><div class="public anchor" id="var-disable-middlewares"><h3>disable-middlewares</h3><div class="usage"><code>(disable-middlewares descriptor route-id ks &amp; more)</code></div><div class="doc"><div class="markdown"><p>Disable the given middlewares for the endpoint identified by the given route ID/middleware key pairs.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware_data.clj#L43">view source</a></div></div><div class="public anchor" id="var-enable-middlewares"><h3>enable-middlewares</h3><div class="usage"><code>(enable-middlewares descriptor route-id ks &amp; more)</code></div><div class="doc"><div class="markdown"><p>Enable the given middlewares for the endpoint identified by the given route ID/middleware key pairs.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware_data.clj#L34">view source</a></div></div><div class="public anchor" id="var-endpoint"><h3>endpoint</h3><div class="usage"><code>(endpoint request)</code></div><div class="doc"><div class="markdown"><p>Get the endpoint data the request should be routed to.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L26">view source</a></div></div><div class="public anchor" id="var-endpoint-middleware"><h3>endpoint-middleware</h3><div class="usage"><code>(endpoint-middleware handler endpoints wrap-fn)</code></div><div class="doc"><div class="markdown"><p>Like <code>conditional-middleware</code>, applying the given middleware only if the request is being routed to one of the given endpoints. (A single non-sequential endpoint ID may be given instead of a seq of multiple.)</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L94">view source</a></div></div><div class="public anchor" id="var-endpoint-transform"><h3>endpoint-transform</h3><div class="usage"><code>(endpoint-transform handler endpoints f)</code></div><div class="doc"><div class="markdown"><p>Like <code>conditional-transform</code>, applying the given function to requests that are being routed to one of the given endpoints. (A single non-sequential endpoint ID may be given instead of a seq of multiple.)</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L104">view source</a></div></div><div class="public anchor" id="var-href"><h3>href</h3><div class="usage"><code>(href request route-id)</code><code>(href request route-id values)</code></div><div class="doc"><div class="markdown"><p>Generate path + query string for the given route based on the RouteDescriptor stored in the given request.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L61">view source</a></div></div><div class="public anchor" id="var-match"><h3>match</h3><div class="usage"><code>(match request path)</code><code>(match request request-method path)</code></div><div class="doc"><div class="markdown"><p>Parse the given path and create a map of <code>:id</code>, <code>:route-params</code>, <code>:query-params</code> and <code>:params</code> based on the RouteDescriptor stored in the given request.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L72">view source</a></div></div><div class="public anchor" id="var-merge-metadata"><h3>merge-metadata</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(merge-metadata descriptor route-id m)</code></div><div class="doc"><div class="markdown"><p>Merge the given map into the given routes metadata.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/descriptor.clj#L59">view source</a></div></div><div class="public anchor" id="var-meta-middleware"><h3>meta-middleware</h3><h4 class="added">added in 0.2.1</h4><div class="usage"><code>(meta-middleware handler middleware-key wrap-fn)</code></div><div class="doc"><div class="markdown"><p>If routing metadata is available, builds a (memoized) handler using <code>(wrap-fn handler route-id metadata)</code> and routes the request to it.</p><p>The middleware data is expected at <code>[:meta :middlewares k]</code> of the routing metadata attached by <code>wrap-routing</code> and the middleware itself is supposed to be activated using <code>enable-middlewares</code>. Note that even <code>nil</code> metadata is allowed an will be passed to <code>wrap-fn</code>.</p><p>If <code>wrap-fn</code> returns <code>nil</code>, no middleware will be applied.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/meta_middleware.clj#L6">view source</a></div></div><div class="public anchor" id="var-path"><h3>path</h3><div class="usage"><code>(path request route-id)</code><code>(path request route-id values)</code></div><div class="doc"><div class="markdown"><p>Generate the path component for the given route based on the RouteDescriptor stored in the given request.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L56">view source</a></div></div><div class="public anchor" id="var-prefix"><h3>prefix</h3><div class="usage"><code>(prefix descriptor prefix)</code></div><div class="doc"><div class="markdown"><p>Create a new RouteDescriptor representing the routes of the given one prefixed by a bidi-style route, e.g.</p>
<pre><code>(prefix d &quot;/a&quot;)
(prefix d [&quot;/&quot; :locale])
(prefix d [&quot;/&quot; [#&quot;de|fr|us&quot; :locale]])
</code></pre></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/prefix.clj#L51">view source</a></div></div><div class="public anchor" id="var-routed-middleware"><h3>routed-middleware</h3><div class="usage"><code>(routed-middleware handler middleware-key wrap-fn &amp; args)</code></div><div class="doc"><div class="markdown"><p>Generate a handler that applies the middleware represented by <code>wrap-fn</code> only if it is explicitly enabled for the currently routed endpoint. This has to be used below <code>ronda.routing.middleware/wrap-routing</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/routed_middleware.clj#L26">view source</a></div></div><div class="public anchor" id="var-routes"><h3>routes</h3><div class="usage"><code>(routes _)</code></div><div class="doc"><div class="markdown"><p>Return a map associating route IDs with a map of <code>:path</code> (the full path to the endpoint using bidi&rsquo;s route format) and <code>:methods</code> (the set of request methods applicable for the endpoint), as well as all the additional <code>:meta</code> data set using <code>update-metadata</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing.clj#L16">view source</a></div></div><div class="public anchor" id="var-routing-data"><h3>routing-data</h3><div class="usage"><code>(routing-data request)</code></div><div class="doc"><div class="markdown"><p>Get the routing data for the given request</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/request.clj#L21">view source</a></div></div><div class="public anchor" id="var-update-metadata"><h3>update-metadata</h3><div class="usage"><code>(update-metadata _ route-id f)</code></div><div class="doc"><div class="markdown"><p>Return a new RouteDescriptor that applies the given function to the given route&rsquo;s metadata.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing.clj#L16">view source</a></div></div><div class="public anchor" id="var-wrap-endpoint"><h3>wrap-endpoint</h3><div class="usage"><code>(wrap-endpoint default-handler endpoint-id handler)</code></div><div class="doc"><div class="markdown"><p>Create a Ring handler that intercepts all requests that had the given endpoint ID determined by <code>wrap-routing</code>, delegating them to the given handler.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L47">view source</a></div></div><div class="public anchor" id="var-wrap-endpoints"><h3>wrap-endpoints</h3><div class="usage"><code>(wrap-endpoints default-handler handlers)</code></div><div class="doc"><div class="markdown"><p>Create a Ring handler that intercepts all requests that had an endpoint ID determined by <code>wrap-routing</code> and routes them to the matching handler in the given handlers map. If no match is found, the request is passed to the given default handler.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L33">view source</a></div></div><div class="public anchor" id="var-wrap-routing"><h3>wrap-routing</h3><div class="usage"><code>(wrap-routing handler descriptor &amp; [{:keys [response?], :or {response? false}}])</code></div><div class="doc"><div class="markdown"><p>Wrap the given Ring handler with middleware-based routing using the given RouteDescriptor. If a route can be found for a request the descriptor, route params and endpoint ID are injected into the request map which is then passed to the original handler. If no route can be found, the request is passed to the handler unaltered.</p><p>If <code>:response?</code> is set to <code>true</code> in the optional options map, routing metadata and descriptor is attached to the response, as well.</p></div></div><div class="src-link"><a href="https://github.com/xsc/ronda-routing/blob/master/src/ronda/routing/middleware.clj#L6">view source</a></div></div></div></body></html>